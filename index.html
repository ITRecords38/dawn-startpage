<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="author" content="Bruno Coimbra (https://github.com/b-coimbra)">
    <link rel="stylesheet" type="text/css" href="src/css/awoo.min.css">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200|Roboto:100,400,700|Raleway:600" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/monzanifabio/cryptofont/cryptofont.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css">
    <link href="src/css/style.css" rel="stylesheet" type="text/css">
    <title>~</title>
  </head>
  <body>
    <modal-popup></modal-popup>
    <tabs-list></tabs-list>
    <todo-list class="|" id="todo"></todo-list>

    <script type="text/javascript">
      // Load scripts sequentially to ensure proper dependency order
      async function loadScript(src) {
        return new Promise((resolve, reject) => {
          const script = document.createElement('script');
          script.src = src;
          script.onload = resolve;
          script.onerror = reject;
          document.head.appendChild(script);
        });
      }

      async function init() {
        const configType = new URLSearchParams(window.location.search).get('config') || 'default';
        
        // Core dependencies
        const coreDeps = [
          'src/common/utils.js',
          'src/common/storage.js',
          'src/common/notify.js',
          'src/common/actions.js',
          'src/common/config.js',
          'src/common/strftime.js',
          'src/common/component.js'
        ];

        // Load core dependencies first
        for (const src of coreDeps) {
          await loadScript(src);
        }

        // Load config
        await loadScript(`userconfig/${configType}.js`);

        // Load components in order
        const componentScripts = [
          'src/components/shared/modal/modal.component.js',
          'src/components/tabs/tabs.component.js',
          'src/components/search/search.component.js',
          'src/components/clock/clock.component.js',
          'src/components/todo/task-priority.component.js',
          'src/components/todo/task-edit.component.js',
          'src/components/todo/task.component.js',
          'src/components/todo/todo.component.js',
          'src/components/crypto/crypto.api.js',
          'src/components/crypto/crypto-diff.component.js',
          'src/components/crypto/crypto-popup.component.js',
          'src/components/crypto/crypto.component.js',
          'src/components/fast-link/fast-link.component.js',
          'src/components/weather/weather.api.js',
          'src/components/weather/weather.component.js',
          'src/components/statusbar/statusbar.component.js'
        ];

        // Load components sequentially
        for (const src of componentScripts) {
          await loadScript(src);
        }

        // Finally load the module that registers all components
        await loadScript('src/common/module.js');
      }

      // Start loading
      init();
    </script>



  </body>
</html>
